――――――――――――――――
コピーシステム基本憲章（不変）
――――――――――――――――

憲章の位置づけ

本憲章は、cTrader → MT5 コピーツール開発における最上位ルールを定義する。
本憲章に反する設計・実装・議論は禁止する。

本憲章は仕様や通信方式の詳細を定義しない。

役割分離（最重要）

本システムは以下の責務分離を前提とする。

SOURCE（cTrader側）
・エントリー／決済／変更イベントの検知のみを行う
・売買判断ロジックを持たない
・外部へ状態を正確に出力する

BRIDGE（通信層）
・データ転送のみを担当
・取引判断を持たない
・順序保証と再送制御のみを行う

TARGET（MT5側）
・受信イベントの実行のみを行う
・自律的な売買判断を持たない
・受信データ以外で発注しない

コピー原則

本ツールは「判断」ではなく「状態同期」を目的とする。

・エントリーは複製のみ
・決済は複製のみ
・部分決済は数量比例
・SL/TP変更は状態一致を優先

同期保証原則

以下を最優先とする。

・重複発注禁止
・順序保証
・再接続後の整合性回復
・IDベースの1対1マッピング

禁止事項

・裁量判断の追加
・ロット再計算による勝手な変更
・通信エラー時の推測実行
・内部状態への直接改変

未記載事項

詳細仕様は下位文書で定義する。
本憲章は方向性のみを固定する。